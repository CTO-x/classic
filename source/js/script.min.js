function getNav(){var d=$("ul.main-navigation, ul[role=main-navigation]").before('<fieldset class="mobile-nav">');var e=$("fieldset.mobile-nav").append("<select>");e.find("select").append('<option value="">Navigate&hellip;</option>');var f=function(b,a){if(location.href==this.href){e.find("select").append('<option value="'+this.href+'" selected>&raquo; '+$(this).text()+"</option>");}else{e.find("select").append('<option value="'+this.href+'">&raquo; '+$(this).text()+"</option>");}};d.find("a").each(f);$("ul.subscription a").each(f);e.find("select").bind("change",function(a){if(a.target.value){window.location.href=a.target.value;}});}function addSidebarToggler(){if(!$("body").hasClass("sidebar-footer")){$("#content").append('<span class="toggle-sidebar"></span>');$(".toggle-sidebar").bind("click",function(a){a.preventDefault();$("body").toggleClass("collapse-sidebar");});}var b=$("aside.sidebar > section");if(b.length>1){b.each(function(a,e){if((b.length>=3)&&a%3===0){$(e).addClass("first");}var f=((a+1)%2)?"odd":"even";$(e).addClass(f);});}if(b.length>=3){$("aside.sidebar").addClass("thirds");}}function testFeatures(){var b=["maskImage"];$(b).map(function(d,a){if(Modernizr.testAllProps(a)){$("html").addClass(a);}else{$("html").addClass("no-"+a);}});if("placeholder" in document.createElement("input")){$("html").addClass("placeholder");}else{$("html").addClass("no-placeholder");}}function addCodeLineNumbers(){if(navigator.appName==="Microsoft Internet Explorer"){return;}$("div.gist-highlight").each(function(l){var o='<table><tbody><tr><td class="gutter">',j='<pre class="line-numbers">',k='</pre></td><td class="code">',i="</td></tr></tbody></table>",m=$(".line",l).length;for(var p=1;p<=m;p++){j+='<span class="line-number">'+p+"</span>\n";}var n=o+j+k+"<pre>"+$("pre",l).html()+"</pre>"+i;$(l).html(n);});}function flashVideoFallback(){var c="/assets/jwplayer/player.swf",d="/assets/jwplayer/glow/glow.xml";$("video").each(function(b,a){a=$(a);if(!Modernizr.video.h264&&swfobject.getFlashPlayerVersion()||window.location.hash.indexOf("flash-test")!==-1){a.children("source[src$=mp4]").first().map(b,function(l){var k=$(l).attr("src"),j="video_"+Math.round(1+Math.random()*(100000)),m=a.attr("width"),n=parseInt(a.attr("height"),10)+30;a.after('<div class="flash-video"><div><div id='+j+">");swfobject.embedSWF(c,j,m,n+30,"9.0.0",{file:k,image:a.attr("poster"),skin:d},{movie:k,wmode:"opaque",allowfullscreen:"true"});});a.remove();}});}function wrapFlashVideos(){$("object").each(function(c,d){if($(d).find("param[name=movie]").length){$(d).wrap('<div class="flash-video">');}});$("iframe[src*=vimeo],iframe[src*=youtube]").wrap('<div class="flash-video">');}function renderDeliciousLinks(h){var e="<ul>";for(var g=0,f=h.length;g<f;g++){e+='<li><a href="'+h[g].u+'" title="Tags: '+(h[g].t==""?"":h[g].t.join(", "))+'">'+h[g].d+"</a></li>";}e+="</ul>";$("#delicious").html(e);}function highlight(i){var f=$("figure"),g=new ZeroClipboard(),j='<div class="widget-codetool" style="display:none;"><button class="copyCode btn btn-xs" data-clipboard-text="" title="">复制</button></div>',h='<div class="tooltip fade top in" role="tooltip"><div class="tooltip-inner">已复制</div></div>';f.each(function(c,a){var b=$(j);b.find(".copyCode").attr("data-clipboard-text",$(this).attr("data-source-code"));$(this).before(b);$(this).removeAttr("data-source-code");$(this).attr("data-id",c);});f.mouseenter(function(a){clearTimeout(window["copyTimer"+$(this).attr("data-id")]);$(this).prev().fadeIn();g.clip($(this).prev().find(".copyCode"));});$(".widget-codetool").mousedown(function(a){g.clip($(this).find(".copyCode"));});$(".widget-codetool").mouseenter(function(a){clearTimeout(window["copyTimer"+$(this).next().attr("data-id")]);});$(".widget-codetool").mouseleave(function(a){var b=this;window["copyTimer"+$(this).next().attr("data-id")]=setTimeout(function(){$(b).fadeOut(function(){g.unclip($(b).find(".copyCode"));});},1800);});f.mouseleave(function(a){var b=this;window["copyTimer"+$(this).attr("data-id")]=setTimeout(function(){$(b).prev().fadeOut();},1800);});g.on("aftercopy",function(a){$("body").append(h);setTimeout(function(){$(".tooltip").fadeOut(function(){$(this).remove();});},700);g.on("error",function(b){console.log(b.name+": "+b.messsage);});});}function fancybox(){$("article").each(function(b){$(this).find("img").each(function(){if($(this).parent().hasClass("fancybox")){return;}var a=this.alt;if(a){$(this).after('<span class="caption">'+a+"</span>");}$(this).wrap('<a href="'+this.src+'" title="'+a+'" class="fancybox"></a>');});$(this).find(".fancybox").each(function(){$(this).attr("rel","article"+b);});});if($.fancybox){$(".fancybox").fancybox();}}$("document").ready(function(){testFeatures();wrapFlashVideos();flashVideoFallback();getNav();addSidebarToggler();highlight();fancybox();});(function(l){var n="addEventListener",h="gesturestart",j="querySelectorAll",k=[1,1],m=j in l?l[j]("meta[name=viewport]"):[];function i(){m.content="width=device-width,minimum-scale="+k[0]+",maximum-scale="+k[1];l.removeEventListener(h,i,true);}if((m=m[m.length-1])&&n in l){i();k=[0.25,1.6];l[n](h,i,true);}}(document));
/*! SWFObject v2.2 modified by Brandon Mathis to contain only what is necessary to dynamically embed flash objects
  * Uncompressed source in javascripts/libs/swfobject-dynamic.js
  * <http://code.google.com/p/swfobject/>
  released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
;var swfobject=function(){function g(k,p,b){var h,f=u(b);if(m.wk&&m.wk<312){return h;}if(f){if(typeof k.id==s){k.id=b;}if(m.ie&&m.win){var c="",a;for(a in k){if(k[a]!=Object.prototype[a]){a.toLowerCase()=="data"?p.movie=k[a]:a.toLowerCase()=="styleclass"?c+=' class="'+k[a]+'"':a.toLowerCase()!="classid"&&(c+=" "+a+'="'+k[a]+'"');}}a="";for(var d in p){p[d]!=Object.prototype[d]&&(a+='<param name="'+d+'" value="'+p[d]+'" />');}f.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+a+"</object>";h=u(k.id);}else{d=n.createElement(v);d.setAttribute("type",t);for(var e in k){k[e]!=Object.prototype[e]&&(e.toLowerCase()=="styleclass"?d.setAttribute("class",k[e]):e.toLowerCase()!="classid"&&d.setAttribute(e,k[e]));}for(c in p){p[c]!=Object.prototype[c]&&c.toLowerCase()!="movie"&&(k=d,a=c,e=p[c],b=n.createElement("param"),b.setAttribute("name",a),b.setAttribute("value",e),k.appendChild(b));}f.parentNode.replaceChild(d,f);h=d;}}return h;}function u(b){var c=null;try{c=n.getElementById(b);}catch(a){}return c;}function i(a){var b=m.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1;}function j(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=s?encodeURIComponent(a):a;}var s="undefined",v="object",t="application/x-shockwave-flash",l=window,n=document,o=navigator,m=function(){var h=typeof n.getElementById!=s&&typeof n.getElementsByTagName!=s&&typeof n.createElement!=s,k=o.userAgent.toLowerCase(),a=o.platform.toLowerCase(),d=a?/win/.test(a):/win/.test(k),a=a?/mac/.test(a):/mac/.test(k),k=/webkit/.test(k)?parseFloat(k.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,f=!+"\u000b1",b=[0,0,0],p=null;if(typeof o.plugins!=s&&typeof o.plugins["Shockwave Flash"]==v){if((p=o.plugins["Shockwave Flash"].description)&&!(typeof o.mimeTypes!=s&&o.mimeTypes[t]&&!o.mimeTypes[t].enabledPlugin)){f=!1,p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=parseInt(p.replace(/^(.*)\..*$/,"$1"),10),b[1]=parseInt(p.replace(/^.*\.(.*)\s.*$/,"$1"),10),b[2]=/[a-zA-Z]/.test(p)?parseInt(p.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof l.ActiveXObject!=s){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c&&(p=c.GetVariable("$version"))){f=!0,p=p.split(" ")[1].split(","),b=[parseInt(p[0],10),parseInt(p[1],10),parseInt(p[2],10)];}}catch(e){}}}return{w3:h,pv:b,wk:k,ie:f,win:d,mac:a};}();return{embedSWF:function(a,b,h,r,E,k,d,p,q){var D={success:!1,id:b};if(m.w3&&!(m.wk&&m.wk<312)&&a&&b&&h&&r&&E){h+="";r+="";var e={};if(p&&typeof p===v){for(var F in p){e[F]=p[F];}}e.data=a;e.width=h;e.height=r;a={};if(d&&typeof d===v){for(var c in d){a[c]=d[c];}}if(k&&typeof k===v){for(var f in k){typeof a.flashvars!=s?a.flashvars+="&"+f+"="+k[f]:a.flashvars=f+"="+k[f];}}if(i(E)){b=g(e,a,b),D.success=!0,D.ref=b;}}q&&q(D);},ua:m,getFlashPlayerVersion:function(){return{major:m.pv[0],minor:m.pv[1],release:m.pv[2]};},hasFlashPlayerVersion:i,createSWF:function(b,c,a){if(m.w3){return g(b,c,a);}},getQueryParamValue:function(b){var c=n.location.search||n.location.hash;if(c){/\?/.test(c)&&(c=c.split("?")[1]);if(b==null){return j(c);}for(var c=c.split("&"),a=0;a<c.length;a++){if(c[a].substring(0,c[a].indexOf("="))==b){return j(c[a].substring(c[a].indexOf("=")+1));}}}return"";}};}();