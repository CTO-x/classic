function getNav(){var b=$("ul.main-navigation, ul[role=main-navigation]").before('<fieldset class="mobile-nav">');var a=$("fieldset.mobile-nav").append("<select>");a.find("select").append('<option value="">Navigate&hellip;</option>');var c=function(d,e){if(location.href==this.href){a.find("select").append('<option value="'+this.href+'" selected>&raquo; '+$(this).text()+"</option>");}else{a.find("select").append('<option value="'+this.href+'">&raquo; '+$(this).text()+"</option>");}};b.find("a").each(c);$("ul.subscription a").each(c);a.find("select").bind("change",function(d){if(d.target.value){window.location.href=d.target.value;}});}function addSidebarToggler(){if(!$("body").hasClass("sidebar-footer")){$("#content").append('<span class="toggle-sidebar"></span>');$(".toggle-sidebar").bind("click",function(b){b.preventDefault();$("body").toggleClass("collapse-sidebar");});}var a=$("aside.sidebar > section");if(a.length>1){a.each(function(b,d){if((a.length>=3)&&b%3===0){$(d).addClass("first");}var c=((b+1)%2)?"odd":"even";$(d).addClass(c);});}if(a.length>=3){$("aside.sidebar").addClass("thirds");}}function testFeatures(){var a=["maskImage"];$(a).map(function(c,b){if(Modernizr.testAllProps(b)){$("html").addClass(b);}else{$("html").addClass("no-"+b);}});if("placeholder" in document.createElement("input")){$("html").addClass("placeholder");}else{$("html").addClass("no-placeholder");}}function addCodeLineNumbers(){if(navigator.appName==="Microsoft Internet Explorer"){return;}$("div.gist-highlight").each(function(g){var d='<table><tbody><tr><td class="gutter">',a='<pre class="line-numbers">',h='</pre></td><td class="code">',b="</td></tr></tbody></table>",f=$(".line",g).length;for(var c=1;c<=f;c++){a+='<span class="line-number">'+c+"</span>\n";}var e=d+a+h+"<pre>"+$("pre",g).html()+"</pre>"+b;$(g).html(e);});}function flashVideoFallback(){var b="/assets/jwplayer/player.swf",a="/assets/jwplayer/glow/glow.xml";$("video").each(function(c,d){d=$(d);if(!Modernizr.video.h264&&swfobject.getFlashPlayerVersion()||window.location.hash.indexOf("flash-test")!==-1){d.children("source[src$=mp4]").first().map(c,function(g){var h=$(g).attr("src"),i="video_"+Math.round(1+Math.random()*(100000)),f=d.attr("width"),e=parseInt(d.attr("height"),10)+30;d.after('<div class="flash-video"><div><div id='+i+">");swfobject.embedSWF(b,i,f,e+30,"9.0.0",{file:h,image:d.attr("poster"),skin:a},{movie:h,wmode:"opaque",allowfullscreen:"true"});});d.remove();}});}function wrapFlashVideos(){$("object").each(function(b,a){if($(a).find("param[name=movie]").length){$(a).wrap('<div class="flash-video">');}});$("iframe[src*=vimeo],iframe[src*=youtube]").wrap('<div class="flash-video">');}function renderDeliciousLinks(c){var b="<ul>";for(var d=0,a=c.length;d<a;d++){b+='<li><a href="'+c[d].u+'" title="Tags: '+(c[d].t==""?"":c[d].t.join(", "))+'">'+c[d].d+"</a></li>";}b+="</ul>";$("#delicious").html(b);}function highlight(){var b=$("figure"),a=new ZeroClipboard(),c='<div class="widget-codetool" style="display:none;"><button class="copyCode btn btn-xs" data-clipboard-text="" title="">复制</button></div>',d='<div class="tooltip fade top in" role="tooltip"><div class="tooltip-inner">已复制</div></div>';b.each(function(e,g){var f=$(c);f.find(".copyCode").attr("data-clipboard-text",$(this).attr("data-source-code"));$(this).before(f);$(this).removeAttr("data-source-code");$(this).attr("data-id",e);});b.mouseenter(function(f){clearTimeout(window["copyTimer"+$(this).attr("data-id")]);$(this).prev().fadeIn();a.clip($(this).prev().find(".copyCode"));});$(".widget-codetool").mousedown(function(f){a.clip($(this).find(".copyCode"));});$(".widget-codetool").mouseenter(function(f){clearTimeout(window["copyTimer"+$(this).next().attr("data-id")]);});$(".widget-codetool").mouseleave(function(g){var f=this;window["copyTimer"+$(this).next().attr("data-id")]=setTimeout(function(){$(f).fadeOut(function(){a.unclip($(f).find(".copyCode"));});},1800);});b.mouseleave(function(g){var f=this;window["copyTimer"+$(this).attr("data-id")]=setTimeout(function(){$(f).prev().fadeOut();},1800);});a.on("aftercopy",function(f){$("body").append(d);var e=$(f.target).parent().next();$(".tooltip").css({top:e.offset().top+"px",left:(e.offset().left-$("body").offset().left+(e.width()/2)-18)+"px"});$(".tooltip").slideDown();setTimeout(function(){$(".tooltip").slideUp(function(){$(this).remove();});},900);a.on("error",function(g){console.log(g.name+": "+g.messsage);});});}function fancybox(){$("article").each(function(a){$(this).find("img").each(function(){if($(this).parent().hasClass("fancybox")){return;}var b=this.alt;$(this).wrap('<a href="'+this.src+'" title="'+b+'" class="fancybox"></a>');});$(this).find(".fancybox").each(function(){$(this).attr("rel","article"+a);});});if($.fancybox){$(".fancybox").fancybox();}}$("document").ready(function(){testFeatures();wrapFlashVideos();flashVideoFallback();getNav();addSidebarToggler();highlight();fancybox();});(function(e){var c="addEventListener",b="gesturestart",g="querySelectorAll",f=[1,1],d=g in e?e[g]("meta[name=viewport]"):[];function a(){d.content="width=device-width,minimum-scale="+f[0]+",maximum-scale="+f[1];e.removeEventListener(b,a,true);}if((d=d[d.length-1])&&c in e){a();f=[0.25,1.6];e[c](b,a,true);}}(document));
/*! SWFObject v2.2 modified by Brandon Mathis to contain only what is necessary to dynamically embed flash objects
  * Uncompressed source in javascripts/libs/swfobject-dynamic.js
  * <http://code.google.com/p/swfobject/>
  released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
;var swfobject=function(){function r(t,s,n){var g,i=b(n);if(h.wk&&h.wk<312){return g;}if(i){if(typeof t.id==d){t.id=n;}if(h.ie&&h.win){var m="",o;for(o in t){if(t[o]!=Object.prototype[o]){o.toLowerCase()=="data"?s.movie=t[o]:o.toLowerCase()=="styleclass"?m+=' class="'+t[o]+'"':o.toLowerCase()!="classid"&&(m+=" "+o+'="'+t[o]+'"');}}o="";for(var l in s){s[l]!=Object.prototype[l]&&(o+='<param name="'+l+'" value="'+s[l]+'" />');}i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+m+">"+o+"</object>";g=b(t.id);}else{l=f.createElement(a);l.setAttribute("type",c);for(var j in t){t[j]!=Object.prototype[j]&&(j.toLowerCase()=="styleclass"?l.setAttribute("class",t[j]):j.toLowerCase()!="classid"&&l.setAttribute(j,t[j]));}for(m in s){s[m]!=Object.prototype[m]&&m.toLowerCase()!="movie"&&(t=l,o=m,j=s[m],n=f.createElement("param"),n.setAttribute("name",o),n.setAttribute("value",j),t.appendChild(n));}i.parentNode.replaceChild(l,i);g=l;}}return g;}function b(i){var g=null;try{g=f.getElementById(i);}catch(j){}return g;}function q(i){var g=h.pv,i=i.split(".");i[0]=parseInt(i[0],10);i[1]=parseInt(i[1],10)||0;i[2]=parseInt(i[2],10)||0;return g[0]>i[0]||g[0]==i[0]&&g[1]>i[1]||g[0]==i[0]&&g[1]==i[1]&&g[2]>=i[2]?!0:!1;}function p(g){return/[\\\"<>\.;]/.exec(g)!=null&&typeof encodeURIComponent!=d?encodeURIComponent(g):g;}var d="undefined",a="object",c="application/x-shockwave-flash",k=window,f=document,e=navigator,h=function(){var u=typeof f.getElementById!=d&&typeof f.getElementsByTagName!=d&&typeof f.createElement!=d,t=e.userAgent.toLowerCase(),o=e.platform.toLowerCase(),l=o?/win/.test(o):/win/.test(t),o=o?/mac/.test(o):/mac/.test(t),t=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,i=!+"\u000b1",n=[0,0,0],s=null;if(typeof e.plugins!=d&&typeof e.plugins["Shockwave Flash"]==a){if((s=e.plugins["Shockwave Flash"].description)&&!(typeof e.mimeTypes!=d&&e.mimeTypes[c]&&!e.mimeTypes[c].enabledPlugin)){i=!1,s=s.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),n[0]=parseInt(s.replace(/^(.*)\..*$/,"$1"),10),n[1]=parseInt(s.replace(/^.*\.(.*)\s.*$/,"$1"),10),n[2]=/[a-zA-Z]/.test(s)?parseInt(s.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof k.ActiveXObject!=d){try{var m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(m&&(s=m.GetVariable("$version"))){i=!0,s=s.split(" ")[1].split(","),n=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)];}}catch(j){}}}return{w3:u,pv:n,wk:t,ie:i,win:l,mac:o};}();return{embedSWF:function(C,B,z,v,t,y,A,x,w){var u={success:!1,id:B};if(h.w3&&!(h.wk&&h.wk<312)&&C&&B&&z&&v&&t){z+="";v+="";var l={};if(x&&typeof x===a){for(var s in x){l[s]=x[s];}}l.data=C;l.width=z;l.height=v;C={};if(A&&typeof A===a){for(var o in A){C[o]=A[o];}}if(y&&typeof y===a){for(var g in y){typeof C.flashvars!=d?C.flashvars+="&"+g+"="+y[g]:C.flashvars=g+"="+y[g];}}if(q(t)){B=r(l,C,B),u.success=!0,u.ref=B;}}w&&w(u);},ua:h,getFlashPlayerVersion:function(){return{major:h.pv[0],minor:h.pv[1],release:h.pv[2]};},hasFlashPlayerVersion:q,createSWF:function(i,g,j){if(h.w3){return r(i,g,j);}},getQueryParamValue:function(i){var g=f.location.search||f.location.hash;if(g){/\?/.test(g)&&(g=g.split("?")[1]);if(i==null){return p(g);}for(var g=g.split("&"),j=0;j<g.length;j++){if(g[j].substring(0,g[j].indexOf("="))==i){return p(g[j].substring(g[j].indexOf("=")+1));}}}return"";}};}();